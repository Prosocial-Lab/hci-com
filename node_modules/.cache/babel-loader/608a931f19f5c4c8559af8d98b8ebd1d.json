{"ast":null,"code":"import _taggedTemplateLiteral from \"C:/Users/spenc/Documents/GitHub/hci-com/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\spenc\\\\Documents\\\\GitHub\\\\hci-com\\\\src\\\\containers\\\\Home\\\\components\\\\BubbleLite.tsx\",\n    _templateObject,\n    _s2 = $RefreshSig$();\n\nimport React, { useLayoutEffect } from 'react';\nimport * as am4core from \"@amcharts/amcharts4/core\";\nimport am4themes_animated from \"@amcharts/amcharts4/themes/animated\";\nimport * as am4plugins_forceDirected from \"@amcharts/amcharts4/plugins/forceDirected\";\nimport styled from 'styled-components';\nimport axios from 'axios';\nimport './chart.css';\nimport Popover from 'react-bootstrap/Popover';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar user_id = \"634739719\";\nam4core.useTheme(am4themes_animated);\nam4core.options.autoDispose = true;\nconst tweetpop = {\n  width: '400px',\n  maxWidth: 'none',\n  height: '600px',\n  maxHeight: '600px'\n};\nconst rcheck = {\n  color: '#9EFA99',\n  backgroundColor: '#9EFA99'\n};\nconst Check = styled.p(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n    &&& {\\n    padding: .05em;\\n    font-size: 24px;\\n}\"])));\n\nfunction Pop(data) {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(Popover, {\n      id: \"popover-basic\",\n      placement: \"top\",\n      style: tweetpop,\n      children: [/*#__PURE__*/_jsxDEV(Popover.Title, {\n        children: \"Sample Audience\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Popover.Content, {\n        children: data\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 3\n  }, this);\n}\n\n_c = Pop;\n\nfunction organizeData(data, num, color) {\n  var new_data = [];\n  var i = 0;\n\n  for (const key in data) {\n    i = i + 1;\n    new_data.push({\n      \"name\": String(key),\n      \"value\": data[key][\"number\"],\n      \"color\": color,\n      \"sample\": data[key][\"audience_sample\"]\n    });\n  }\n\n  return new_data;\n}\n\nfunction makeAudList(audience) {\n  var div = document.createElement(\"div\");\n\n  for (var i = 0; i < audience.length; i++) {\n    var h = document.createElement(\"h4\");\n    var node = document.createTextNode(audience[i][\"name\"]);\n    h.append(node);\n    var hsub = document.createElement(\"h5\");\n    var anchor = document.createElement(\"a\");\n    node = document.createTextNode(audience[i][\"id_text\"]);\n    anchor.append(node);\n    anchor.href = \"https://www.twitter.com/i/user/\" + audience[i][\"id_text\"];\n    anchor.target = \"_blank\";\n    anchor.rel = \"noopener noreferrer\";\n    hsub.append(anchor);\n    var p = document.createElement(\"p\");\n    node = document.createTextNode(audience[i][\"bio\"]);\n    p.appendChild(node);\n    div.append(h);\n    div.append(hsub);\n    div.append(p);\n  }\n\n  ;\n  return div;\n}\n\n;\n\nfunction displayPopup(chart, audience) {\n  chart.closeAllPopups();\n  var g = makeAudList(audience);\n  var gs = g.outerHTML;\n  chart.openPopup(gs, \"Sample users\");\n}\n\nfunction BubbleLite(props) {\n  _s2();\n\n  var _s = $RefreshSig$();\n\n  const full_data = props.data; //const [isLoading, setLoading] = useState(true);\n  //const [audience, setAudience] = useState([]);\n\n  var series_dict = props.series_dict;\n  /*\r\n  var ids = []\r\n    for (var key in full_data){\r\n    for (var word in full_data[key]){\r\n      console.log(full_data[key][word][\"audience_sample\"])\r\n      ids.push(...full_data[key][word][\"audience_sample\"])\r\n    }\r\n  }\r\n  console.log(\"ids:\")\r\n  console.log(ids)\r\n  */\n\n  useLayoutEffect(_s(() => {\n    _s();\n\n    //chart.paddingRight = 20;\n    //chart.paddingLeft = 20;\n\n    /* Chart code */\n    // Themes begin\n    am4core.useTheme(am4themes_animated); // Themes end\n\n    var data0 = props.data; // Chart\n    //if (chart !== undefined) {chart.dispose()}\n\n    let chart = am4core.create(props.divid, am4plugins_forceDirected.ForceDirectedTree);\n    chart.hiddenState.properties.opacity = 0; // this creates initial fade-in\n\n    let series = chart.series.push(new am4plugins_forceDirected.ForceDirectedSeries());\n    console.log(chart.popups.template);\n    /*series.colors.list = [am4core.color(\"#000000\"),\r\n                          am4core.color(\"#000000\"),\r\n                          am4core.color(\"#000000\"),\r\n                          am4core.color(\"#000000\"),\r\n                          am4core.color(\"#000000\"),\r\n                          am4core.color(\"#000000\"),\r\n                          am4core.color(\"#000000\"),\r\n                          am4core.color(\"#000000\"),\r\n                          am4core.color(\"#000000\"),\r\n                          am4core.color(\"#000000\"),\r\n                          am4core.color(\"#000000\"),\r\n                          am4core.color(\"#000000\")];\r\n    series.colors.wrap = false;\r\n    */\n\n    series.dataFields.color = \"color\"; // Set data\n\n    series.data = [{\n      \"name\": \"First\",\n      \"value\": 190,\n      \"color\": am4core.color(\"#000000\")\n    }, {\n      \"name\": \"Second\",\n      \"value\": 289,\n      \"color\": am4core.color(\"#000000\")\n    }, {\n      \"name\": \"Third\",\n      \"value\": 635,\n      \"color\": am4core.color(\"#000000\")\n    }, {\n      \"name\": \"Fourth\",\n      \"value\": 732,\n      \"color\": am4core.color(\"#000000\")\n    }, {\n      \"name\": \"Fifth\",\n      \"value\": 835,\n      \"color\": am4core.color(\"#000000\")\n    }, {\n      \"name\": \"First\",\n      \"value\": 190,\n      \"color\": am4core.color(\"#9efa99\")\n    }, {\n      \"name\": \"Second\",\n      \"value\": 289,\n      \"color\": am4core.color(\"#9efa99\")\n    }, {\n      \"name\": \"Third\",\n      \"value\": 635,\n      \"color\": am4core.color(\"#9efa99\")\n    }, {\n      \"name\": \"Fourth\",\n      \"value\": 732,\n      \"color\": am4core.color(\"#9efa99\")\n    }, {\n      \"name\": \"Fifth\",\n      \"value\": 835,\n      \"color\": am4core.color(\"#9efa99\")\n    }]; // Set up data fields\n\n    series.dataFields.value = \"value\";\n    series.dataFields.name = \"name\";\n    series.dataFields.children = \"children\"; // Add labels\n\n    series.nodes.template.label.text = \"{name}\";\n    series.nodes.template.label.fill = am4core.color(\"#000000\");\n    series.fontSize = 10;\n    series.minRadius = 5;\n    series.maxRadius = 35;\n    series.manyBodyStrength = -8;\n    series.links.template.distance = 2;\n    series.links.template.strength = 2; //chart.cursorOverStyle = am4core.MouseCursorStyle.grab;\n\n    series.nodes.template.cursorOverStyle = am4core.MouseCursorStyle.grab;\n    series.cursorOverStyle = am4core.MouseCursorStyle.grab;\n    series.nodes.template.tooltipText = \"{name}: {value}\";\n    series.nodes.template.events.on(\"hit\", function (ev) {\n      var ids = ev.target.dataItem.dataContext['sample'];\n      axios.get(\"http://localhost:4001/twitter/audienceWhereIDs/\".concat(ids)).then(response => {\n        displayPopup(chart, response.data);\n      }).catch(error => console.error(\"There was an error retrieving the retweets list: \".concat(error)));\n      /*chart.modal.close();\r\n      \n      // get object info\r\n      console.log(ev.target.dataItem.dataContext['sample']);\r\n      //chart.openModal(ev.target.dataItem.dataContext['sample']);\r\n      //chart.openModal(\"<div>This is a <strong>strong</strong></div>\");\r\n      var g = makeAudList([])\r\n      var gs = g.outerHTML;\r\n      chart.openModal(gs);*/\n    });\n    series.data = organizeData(props.data, 25, series_dict[props.com][\"col\"]);\n  }, \"tFi1QeP7MrrEQ5RfFlomBKZonOc=\", false, function () {\n    return [am4core.useTheme];\n  }), []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      id: props.divid,\n      style: {\n        width: \"100%\",\n        height: \"500px\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 254,\n    columnNumber: 5\n  }, this);\n}\n\n_s2(BubbleLite, \"n7/vCynhJvM+pLkyL2DMQUF0odM=\");\n\n_c2 = BubbleLite;\nexport default BubbleLite;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Pop\");\n$RefreshReg$(_c2, \"BubbleLite\");","map":{"version":3,"sources":["C:/Users/spenc/Documents/GitHub/hci-com/src/containers/Home/components/BubbleLite.tsx"],"names":["React","useLayoutEffect","am4core","am4themes_animated","am4plugins_forceDirected","styled","axios","Popover","user_id","useTheme","options","autoDispose","tweetpop","width","maxWidth","height","maxHeight","rcheck","color","backgroundColor","Check","p","Pop","data","organizeData","num","new_data","i","key","push","String","makeAudList","audience","div","document","createElement","length","h","node","createTextNode","append","hsub","anchor","href","target","rel","appendChild","displayPopup","chart","closeAllPopups","g","gs","outerHTML","openPopup","BubbleLite","props","full_data","series_dict","data0","create","divid","ForceDirectedTree","hiddenState","properties","opacity","series","ForceDirectedSeries","console","log","popups","template","dataFields","value","name","children","nodes","label","text","fill","fontSize","minRadius","maxRadius","manyBodyStrength","links","distance","strength","cursorOverStyle","MouseCursorStyle","grab","tooltipText","events","on","ev","ids","dataItem","dataContext","get","then","response","catch","error","com"],"mappings":"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","sourcesContent":["import React, { useRef, useLayoutEffect, useState } from 'react';\r\nimport ReactDom from 'react-dom';\r\nimport logo from './logo.svg';\r\nimport * as am4core from \"@amcharts/amcharts4/core\";\r\nimport * as am4charts from \"@amcharts/amcharts4/charts\";\r\nimport am4themes_animated from \"@amcharts/amcharts4/themes/animated\";\r\nimport * as am4plugins_forceDirected from \"@amcharts/amcharts4/plugins/forceDirected\";\r\nimport styled from 'styled-components';\r\nimport {space, color, layout} from 'styled-system';\r\nimport Card from 'react-bootstrap/Card';\r\nimport axios from 'axios'\r\nimport './chart.css';\r\nimport Popover from 'react-bootstrap/Popover'\r\n\r\nvar user_id = \"634739719\";\r\n\r\nam4core.useTheme(am4themes_animated);\r\nam4core.options.autoDispose = true;\r\n\r\nconst tweetpop = {\r\n  width: '400px',\r\n  maxWidth: 'none',\r\n  height: '600px',\r\n  maxHeight: '600px'\r\n  \r\n};\r\n\r\nconst rcheck = {\r\n  color: '#9EFA99',\r\n  backgroundColor: '#9EFA99'\r\n\r\n}\r\n\r\nconst Check = styled.p`\r\n    &&& {\r\n    padding: .05em;\r\n    font-size: 24px;\r\n}`\r\n\r\nfunction Pop(data){\r\n  return(\r\n\r\n  <div>\r\n    <Popover id=\"popover-basic\" placement=\"top\" style={tweetpop}>\r\n      <Popover.Title>Sample Audience</Popover.Title>\r\n      <Popover.Content>\r\n          {data}\r\n      </Popover.Content>\r\n    </Popover>\r\n  </div>\r\n\r\n  )\r\n}\r\n\r\n\r\nfunction organizeData(data, num, color){\r\n  var new_data = []\r\n  var i = 0\r\n  for (const key in data){\r\n    i = i + 1\r\n    \r\n        new_data.push({\"name\": String(key),\r\n                     \"value\": data[key][\"number\"],\r\n                    \"color\": color,\r\n                    \"sample\": data[key][\"audience_sample\"]})\r\n    }\r\n  \r\n  return (new_data)\r\n}\r\n\r\nfunction makeAudList(audience) {\r\n  var div = document.createElement(\"div\")\r\n  for (var i = 0; i < audience.length; i++) {\r\n    \r\n    var h = document.createElement(\"h4\")\r\n    var node = document.createTextNode(audience[i][\"name\"])\r\n    h.append(node)\r\n\r\n    var hsub = document.createElement(\"h5\")\r\n  \r\n    var anchor = document.createElement(\"a\")\r\n    node = document.createTextNode(audience[i][\"id_text\"])\r\n    anchor.append(node)\r\n    anchor.href = \"https://www.twitter.com/i/user/\" + audience[i][\"id_text\"]\r\n    anchor.target = \"_blank\"\r\n    anchor.rel = \"noopener noreferrer\"\r\n    hsub.append(anchor)\r\n\r\n    var p = document.createElement(\"p\")\r\n    node = document.createTextNode(audience[i][\"bio\"]);\r\n\r\n    p.appendChild(node)\r\n    div.append(h)\r\n    div.append(hsub)\r\n    div.append(p)\r\n  };\r\n  return div\r\n};\r\n\r\nfunction displayPopup(chart, audience) {\r\n  \r\n  chart.closeAllPopups();\r\n \r\n  var g = makeAudList(audience)\r\n  var gs = g.outerHTML;\r\n  chart.openPopup(gs, \"Sample users\");\r\n}\r\n\r\nfunction BubbleLite(props) {\r\n  const full_data = props.data\r\n\r\n  //const [isLoading, setLoading] = useState(true);\r\n  //const [audience, setAudience] = useState([]);\r\n  var series_dict = props.series_dict\r\n\r\n  /*\r\n  var ids = []\r\n\r\n  for (var key in full_data){\r\n    for (var word in full_data[key]){\r\n      console.log(full_data[key][word][\"audience_sample\"])\r\n      ids.push(...full_data[key][word][\"audience_sample\"])\r\n    }\r\n  }\r\n  console.log(\"ids:\")\r\n  console.log(ids)\r\n  */\r\n\r\n  useLayoutEffect(() => {\r\n\r\n    //chart.paddingRight = 20;\r\n    //chart.paddingLeft = 20;\r\n\r\n    /* Chart code */\r\n// Themes begin\r\nam4core.useTheme(am4themes_animated);\r\n// Themes end\r\n\r\nvar data0 = props.data\r\n\r\n// Chart\r\n//if (chart !== undefined) {chart.dispose()}\r\nlet chart = am4core.create(props.divid, am4plugins_forceDirected.ForceDirectedTree); \r\nchart.hiddenState.properties.opacity = 0; // this creates initial fade-in\r\n\r\nlet series = chart.series.push(new am4plugins_forceDirected.ForceDirectedSeries())\r\n\r\nconsole.log(chart.popups.template)\r\n\r\n/*series.colors.list = [am4core.color(\"#000000\"),\r\n                      am4core.color(\"#000000\"),\r\n                      am4core.color(\"#000000\"),\r\n                      am4core.color(\"#000000\"),\r\n                      am4core.color(\"#000000\"),\r\n                      am4core.color(\"#000000\"),\r\n                      am4core.color(\"#000000\"),\r\n                      am4core.color(\"#000000\"),\r\n                      am4core.color(\"#000000\"),\r\n                      am4core.color(\"#000000\"),\r\n                      am4core.color(\"#000000\"),\r\n                      am4core.color(\"#000000\")];\r\nseries.colors.wrap = false;\r\n*/\r\nseries.dataFields.color = \"color\";\r\n// Set data\r\nseries.data = [{\r\n  \"name\": \"First\",\r\n  \"value\": 190,\r\n  \"color\": am4core.color(\"#000000\")\r\n}, {\r\n  \"name\": \"Second\",\r\n  \"value\": 289,\r\n  \"color\": am4core.color(\"#000000\")\r\n}, {\r\n  \"name\": \"Third\",\r\n  \"value\": 635,\r\n  \"color\": am4core.color(\"#000000\")\r\n}, {\r\n  \"name\": \"Fourth\",\r\n  \"value\": 732,\r\n  \"color\": am4core.color(\"#000000\")\r\n}, {\r\n  \"name\": \"Fifth\",\r\n  \"value\": 835,\r\n  \"color\": am4core.color(\"#000000\")\r\n}, {\r\n  \"name\": \"First\",\r\n  \"value\": 190,\r\n  \"color\": am4core.color(\"#9efa99\")\r\n}, {\r\n  \"name\": \"Second\",\r\n  \"value\": 289,\r\n  \"color\": am4core.color(\"#9efa99\")\r\n}, {\r\n  \"name\": \"Third\",\r\n  \"value\": 635,\r\n  \"color\": am4core.color(\"#9efa99\")\r\n}, {\r\n  \"name\": \"Fourth\",\r\n  \"value\": 732,\r\n  \"color\": am4core.color(\"#9efa99\")\r\n}, {\r\n  \"name\": \"Fifth\",\r\n  \"value\": 835,\r\n  \"color\": am4core.color(\"#9efa99\")\r\n}]\r\n\r\n// Set up data fields\r\nseries.dataFields.value = \"value\";\r\nseries.dataFields.name = \"name\";\r\nseries.dataFields.children = \"children\";\r\n\r\n// Add labels\r\nseries.nodes.template.label.text = \"{name}\";\r\nseries.nodes.template.label.fill = am4core.color(\"#000000\")\r\nseries.fontSize = 10;\r\nseries.minRadius = 5;\r\nseries.maxRadius = 35;\r\n\r\nseries.manyBodyStrength = -8;\r\nseries.links.template.distance = 2;\r\nseries.links.template.strength = 2;\r\n\r\n//chart.cursorOverStyle = am4core.MouseCursorStyle.grab;\r\nseries.nodes.template.cursorOverStyle = am4core.MouseCursorStyle.grab;\r\nseries.cursorOverStyle = am4core.MouseCursorStyle.grab;\r\n\r\nseries.nodes.template.tooltipText = \"{name}: {value}\";\r\nseries.nodes.template.events.on(\"hit\", function(ev) {\r\n  var ids = ev.target.dataItem.dataContext['sample']\r\n  axios\r\n        .get(`http://localhost:4001/twitter/audienceWhereIDs/${ids}`)\r\n        .then(response => {\r\n          displayPopup(chart, response.data)\r\n        })\r\n        .catch(error => console.error(`There was an error retrieving the retweets list: ${error}`));\r\n  /*chart.modal.close();\r\n \r\n  // get object info\r\n  console.log(ev.target.dataItem.dataContext['sample']);\r\n  //chart.openModal(ev.target.dataItem.dataContext['sample']);\r\n  //chart.openModal(\"<div>This is a <strong>strong</strong></div>\");\r\n  var g = makeAudList([])\r\n  var gs = g.outerHTML;\r\n  chart.openModal(gs);*/\r\n});\r\n\r\nseries.data = organizeData(props.data, 25, series_dict[props.com][\"col\"])\r\n\r\n\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n        <div id={props.divid} style={{ width: \"100%\", height: \"500px\" }}></div>\r\n    </div>\r\n    \r\n  );\r\n}\r\nexport default BubbleLite;"]},"metadata":{},"sourceType":"module"}